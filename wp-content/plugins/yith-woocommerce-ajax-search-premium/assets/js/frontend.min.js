jQuery(document).ready(function(f){var g=f(".yith-s"),k="undefined"!=typeof woocommerce_params&&"undefined"!=typeof woocommerce_params.ajax_loader_url?woocommerce_params.ajax_loader_url:yith_wcas_params.loading,l=""==g.data("loader-icon")?k:g.data("loader-icon"),k=f("#yith-searchsubmit"),m=g.data("min-chars");k.on("click",function(){return""==f(this).closest("form").find(".yith-s").val()?!1:!0});g.each(function(){var c=f(this),h=c.closest("form"),g=!1,d=h.find(".search_categories"),e=h.find(".yit_wcas_post_type"),
k="undefined"==typeof c.data("append-to")?c.closest(".yith-ajaxsearchform-container"):c.data("append-to");c.yithautocomplete({minChars:m,maxHeight:"auto",appendTo:k,triggerSelectOnValidInput:!1,serviceUrl:yith_wcas_params.ajax_url+"&post_type="+e.val(),onSearchStart:function(){c.css({"background-image":"url("+l+")","background-repeat":"no-repeat","background-position":"center right"})},onSearchComplete:function(){c.css("background-image","none")},onSelect:function(a){-1!=a.id&&(window.location.href=
a.url)},beforeRender:function(){if("true"==yith_wcas_params.show_all&&g){var a={s:c.val(),post_type:h.find(".yit_wcas_post_type").val()};0<h.find(".search_categories").length&&(a.product_cat=h.find(".search_categories").val());var d=h.attr("action"),e=-1!==d.indexOf("?")?"&":"?",a='<div class="link-result"><a href="'+(d+e+f.param(a))+'">'+yith_wcas_params.show_all_text+"</a></div>";f(".autocomplete-suggestions").append(a)}},transformResult:function(a){a="string"===typeof a?f.parseJSON(a):a;g=a.results;
return a},formatResult:function(a,d){var c="("+f.YithAutocomplete.utils.escapeRegExChars(d)+")",b="";"undefined"!==typeof a.img&&(b+=a.img);b=b+'<div class="yith_wcas_result_content"><div class="title">'+a.value.replace(new RegExp(c,"gi"),"<strong>$1</strong>");b+="</div>";"undefined"!==typeof a.div_badge_open&&(b+=a.div_badge_open);"undefined"!==typeof a.on_sale&&(b+=a.on_sale);"undefined"!==typeof a.featured&&(b+=a.featured);"undefined"!==typeof a.div_badge_close&&(b+=a.div_badge_close);"undefined"!==
typeof a.price&&""!=a.price&&(b+=" "+yith_wcas_params.price_label+" "+a.price);"undefined"!==typeof a.excerpt&&(b+=" "+a.excerpt.replace(new RegExp(c,"gi"),"<strong>$1</strong>"));return b+="</div>"}});if(d.length)d.on("change",function(a){a=c.yithautocomplete();""!=d.val()?a.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&product_cat="+d.val()}):a.setOptions({serviceUrl:yith_wcas_params.ajax_url});a.hide();a.onValueChange()});e.length&&("any"==e.val()?d.attr("disabled","disabled"):d.removeAttr("disabled"),
e.on("change",function(a){a=c.yithautocomplete();"any"==e.val()?d.attr("disabled","disabled"):d.removeAttr("disabled");""!=e.val()?a.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&post_type="+e.val()}):a.setOptions({serviceUrl:yith_wcas_params.ajax_url});a.hide();a.onValueChange()}))})});
